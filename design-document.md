# Webアプリ仕様書

## 1. 概要

AIと指定したテーマに沿ってディベートを行うアプリを作成する。
どちらがテーマに対して肯定派/否定派に立つのかを指定し、意見を述べるにあたっての先攻後攻も指定できるようにする。
その他ゲーム性を付けることができるような機能を随時追加する。

## 2. 主な機能

### 2.1 入出力フォーム機能
- 設定エリアでユーザーがディベートテーマ・立場・先攻・後攻を入力する。
- 「テーマをチェック」ボタン押下後、`2.3 テーマ検証API`を実行し、テーマがディベートに適しているかAIが判定する。
- 判定結果が「適切」の場合のみ、立場と先攻/後攻を選択し、ディベートを開始できる。
- ディベート開始ボタン押下後、`2.2 生成AIリクエストAPI`を実行し、AIの応答を取得する。
- ディベート画面上に入力とAIの回答を表示する。
- ディベート終了ボタン押下後、`2.4 ディベート評価API`を実行し、会話全体のフィードバックをAIから受け取る。

### 2.2 生成AIリクエスト API
- ユーザーの入力と会話履歴を受け取り、AIに次の応答（反論）を生成させる。
- AIの役割（立場、応答形式など）を定義したシステムプロンプトを会話履歴に含めて、OpenRouter APIへリクエストを送信する。
- OpenRouter経由で各種LLM（例：GPT-4, Claude, Geminiなど）へリクエスト
- 応答をJSON形式でフロントエンドに返す。

### 2.3 テーマ検証 API
- ユーザーが入力したディベートテーマを受け取り、それがディベートに適しているかをAIに判断させる。
- AIは「適切」または「不適切」の判定と、その理由をJSON形式で返す。

### 2.4 ディベート評価 API
- ディベート終了時に、それまでの会話履歴全体をAIに送信する。
- AIは会話内容を分析し、論理の一貫性、説得力、反論の質などの観点からフィードバックを生成して返す。

## 3. 使用技術

| 分類         | 技術・ライブラリ |
|--------------|------------------|
| フロントエンド | Vue.js / HTML5 + CSS3 |
| バックエンド  | Flask |
| 通信方式     | Fetch API / JSON |
| LLMモデル    | OpenRouter API（OpenAI, Anthropic, Mistral等） |

## 4. 入出力例

### 入力
- ディベートテーマ:AIは人間の仕事を奪うか。

- AI:賛成派 ユーザー:否定派

- AI:先攻 ユーザー:後攻
### 出力

- 出力例：テーマ「AIは人間の仕事を奪うか」について、ディベートを開始します。あなたは「否定派」です。 AIが最初の意見を述べます。

AI-AIは、単純作業から高度な専門職まで、あらゆる領域で人間の仕事を代替する可能性を秘めています。
自動化技術の進展により、製造業における単純作業はすでに置き換えが進んでいます。
今後は、AIの学習能力向上により、事務作業、データ分析、顧客対応、さらには医療診断や法律相談といった知的労働も代替されるでしょう。
これは、雇用の構造を根本的に変革し、失業を増加させることは避けられません。

user-

AI-

user-

AI-

フィードバック 